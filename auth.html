<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign in - UBLC Library Assistant</title>
    <link rel="icon" type="image/x-icon" href="public/favicon.ico">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Firebase SDKs for web -->
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyA9g6JtrL46t9vVwI9u6mpiUgdCUeeFMF4",
        authDomain: "chatlibby-b9310.firebaseapp.com",
        projectId: "chatlibby-b9310",
        storageBucket: "chatlibby-b9310.firebasestorage.app",
        messagingSenderId: "428551623308",
        appId: "1:428551623308:web:b077885c48312310d0e1a9"
      };
      firebase.initializeApp(firebaseConfig);
    </script>
  </head>
  <body>
    <div class="auth-shell">
      <div class="auth-card glass-card-glow">
        <div class="auth-header">
          <div class="mascot-wrapper mascot-sm">
            <svg viewBox="0 0 200 200" class="mascot-svg">
              <circle cx="100" cy="100" r="80" fill="hsl(51, 100%, 50%)" class="mascot-head"/>
              <g class="mascot-eye-left">
                <ellipse cx="70" cy="85" rx="15" ry="18" fill="white"/>
                <circle class="eye-pupil" cx="70" cy="85" r="8" fill="black"/>
                <circle class="eye-highlight" cx="67" cy="82" r="3" fill="white"/>
              </g>
              <g class="mascot-eye-right">
                <ellipse cx="130" cy="85" rx="15" ry="18" fill="white"/>
                <circle class="eye-pupil" cx="130" cy="85" r="8" fill="black"/>
                <circle class="eye-highlight" cx="127" cy="82" r="3" fill="white"/>
              </g>
              <path d="M 65 120 Q 100 150 135 120" stroke="black" stroke-width="4" fill="none" stroke-linecap="round"/>
            </svg>
          </div>
          <div>
            <p class="auth-kicker">Welcome, I'm Libby!</p>
            <h1 class="auth-title">Sign in or create an account</h1>
          </div>
        </div>

        <div class="auth-toggle glass-card">
          <button id="tab-login" class="auth-tab active" type="button" onclick="switchAuthTab('login')">Login</button>
          <button id="tab-register" class="auth-tab" type="button" onclick="switchAuthTab('register')">Register</button>
        </div>

        <form id="login-form" class="auth-form" onsubmit="handleLogin(event)">
          <label class="auth-field">
            <span>Student Number</span>
            <input type="text" id="login-student" placeholder="e.g., 2220777" required>
          </label>
          <label class="auth-field">
            <span>Password</span>
            <input type="password" id="login-password" placeholder="Enter password" required>
          </label>
          <button class="btn-primary btn-large" type="submit">Login</button>
          <p class="auth-hint">No account? <button class="link-btn" type="button" onclick="switchAuthTab('register')">Register here</button></p>
          <p id="login-error" class="auth-error"></p>
        </form>

        <form id="register-form" class="auth-form hidden" onsubmit="handleRegister(event)">
          <label class="auth-field">
            <span>Full Name</span>
            <input type="text" id="reg-name" placeholder="e.g., Juan Dela Cruz" required>
          </label>
          <label class="auth-field">
            <span>Year Level</span>
            <input type="text" id="reg-year" placeholder="e.g., BSIT - 4th Year" required>
          </label>
          <label class="auth-field">
            <span>Student Number</span>
            <input type="text" id="reg-student" placeholder="e.g., 2220777" required>
          </label>
          <label class="auth-field">
            <span>Password</span>
            <input type="password" id="reg-password" placeholder="Create password" required>
          </label>
          <button class="btn-primary btn-large" type="submit">Create Account</button>
          <p class="auth-hint">Already have an account? <button class="link-btn" type="button" onclick="switchAuthTab('login')">Login</button></p>
          <p id="register-error" class="auth-error"></p>
        </form>
        <div class="auth-container">
          <h1 class="welcome-title">Welcome back</h1>
          <form id="emailAuthForm" class="auth-form">
            <label>Email</label>
            <input id="email" type="email" placeholder="you@example.com" required />
            <label>Password</label>
            <input id="password" type="password" placeholder="••••••••" required />
            <button id="signInBtn" class="primary-btn" type="submit">Sign in</button>
            <button id="registerBtn" class="secondary-btn" type="button">Create account</button>
            <p id="authError" class="error-text" style="display:none"></p>
          </form>
        </div>
      </div>
    </div>

    <script src="auth.js"></script>
  </body>
</html>

